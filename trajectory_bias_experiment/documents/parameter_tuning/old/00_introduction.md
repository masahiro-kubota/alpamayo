# Experiment: Inference Parameter Tuning (パラメータ調整編)

## 0. 実験の背景 (Context)
**Alpamayo-R1**において、特定のカーブ走行シーンでモデルが頑なに「直進」を選択し続ける問題（**直進バイアス**）が確認されました。
本パートでは、モデルの再学習（Fine-tuning）を行わず、ユーザーが**推論時（Inference-time）に手軽に変更可能なパラメータ**のみを調整することで、この問題を解決できるかを検証します。

---

## 1. アプローチ: 推論パラメータによる解決の試み (Approach)

### 対象パラメータ (Target Tunable Parameters)
以下の4つのパラメータに焦点を当てます。
1.  **Temperature**: 生成の多様性制御
2.  **Prompt**: 入力指示による思考誘導
3.  **Num Samples**: 生成候補数の増加による良質軌道の探索
4.  **Top-P**: 確率分布のサンプリング範囲調整

これらのパラメータ調整によってバイアスが緩和されるのか、あるいはモデルの学習特性として固定化されているのかを明らかにします。

### 調査対象外のパラメータ (Out of Scope)
**Input History Length (入力履歴長)**:
デフォルトの **16 step** からの変更は本調査の対象外とします。
*   **理由**: モデルが固定長の履歴トークン（48 token = 16 steps）を前提に学習されており、推論コードやデータパイプラインもこの設定に強く依存（ハードコード）しているため。再学習なしでの変更はモデルの想定入力分布（Distribution）を大きく崩すリスクがあります。

### 対比: なぜ履歴長は変えられないのか
カメラ台数とは対照的に、**履歴長（16ステップ）は固定**です。

```python
num_traj_token = 48  # ← ハードコードされた固定値
```

モデルは「16ステップの3D座標データ」を「固定48トークン」に圧縮する専用の**Projector（射影層）**を持っており、この層は固定サイズ入力を前提に学習されているため、変更するとエラーが発生します。

---

## 2. 実験結果概要 (Summary of Results)
（詳細は各実験レポートを参照）

いずれのパラメータを変更しても、根本的な「直進バイアス」と「思考と行動の乖離」を解消するには至りませんでした。これは、この問題が単純な設定ミスではなく、モデルの学習分布（Mode Collapse）やアライメント不足に起因する構造的な課題であることを示しています。
